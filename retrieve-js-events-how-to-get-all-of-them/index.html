<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width"/> <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"/><![endif]--><title>Retrieve JS Events: how to get all of them | Fabio Cicerchia</title><meta name="dcterms.title" content="Retrieve JS Events: how to get all of them | Fabio Cicerchia"/><meta property="og:title" content="Retrieve JS Events: how to get all of them | Fabio Cicerchia"/><meta name="twitter:title" content="Retrieve JS Events: how to get all of them | Fabio Cicerchia"/><meta name="description" content="I was trying face an apparently huge problem, collect all the events boundto the DOM elements.Then I realised that the main obstacle was the browser, yes the browser.Because of the way the browser manage the events."/><meta name="dcterms.description" content="I was trying face an apparently huge problem, collect all the events boundto the DOM elements.Then I realised that the main obstacle was the browser, yes the browser.Because of the way the browser manage the events."/><meta property="og:description" content="I was trying face an apparently huge problem, collect all the events boundto the DOM elements.Then I realised that the main obstacle was the browser, yes the browser.Because of the way the browser manage the events."/><meta name="twitter:description" content="I was trying face an apparently huge problem, collect all the events boundto the DOM elements.Then I realised that the main obstacle was the browser, yes the browser.Because of the way the browser manage the events."/><meta name="keywords" content="developer,web,php,fabio,cicerchia,programming,javascript,events,dom,phantomjs,nodejs"/><link rel="author" href="https://plus.google.com/110733047203682160091" title="Fabio Cicerchia on Google+"/><meta name="dcterms.creator" content="Fabio Cicerchia"/><link rel="canonical" href="http://blog.fabiocicerchia.it/retrieve-js-events-how-to-get-all-of-them"/><link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABILAAASCwAAAAAAAAAAAAAJCQn/Dg4O/wsLC/8QEBD/BAQE/wMDA/8pKSn/Hh4e/zExMf/W1tb/n5+f/4KCgv93d3f/ISEh/wcHB/8HBwf/FhYW/w8PD/8ODg7/Ghoa/wkJCf8KCgr/HR0d/0BAQP92dnb/4+Pj/6SkpP+Hh4f/Pj4+/xMTE/8LCwv/BgYG/4GBgf8cHBz/FhYW/ygoKP8eHh7/Hx8f/01NTf97e3v/pKSk/+Tk5P+tra3/iIiI/0BAQP8lJSX/a2tr/4mJif/+/v7/8PDw/+jo6P/w8PD/i4uL/zExMf+vr6//sLCw/3Z2dv+goKD/qKio/3Z2dv9KSkr/NDQ0/8LCwv/Kysr//v7+/////////////v7+///////z8/P/wMDA/66urv+enp7/XFxc/29vb/9ubm7/bGxs/5aWlv/W1tb/zMzM//f39///////////////////////6Ojo/5eXl/+RkZH/hoaG/0hISP8xMTH/Y2Nj/+/v7//m5ub/2tra/8/Pz//W1tb/+fn5//7+/v//////2tra/8TExP+Tk5P/m5ub/319ff9UVFT/KCgo/z8/P//v7+//5ubm/9jY2P/Nzc3/2tra/+Dg4P/v7+//5+fn/3BwcP/CwsL/qamp/5GRkf+EhIT/TExM/z8/P/9SUlL/7u7u/+bm5v/Y2Nj/y8vL/9nZ2f/e3t7/4eHh/7+/v/9kZGT/0NDQ/7e3t/9/f3//eXl5/29vb/9DQ0P/c3Nz//Hx8f/k5OT/1tbW/8nJyf/V1dX/2tra/+Dg4P/l5eX/n5+f/6urq/+srKz/eHh4/3R0dP+Xl5f/i4uL/52dnf/v7+//4+Pj/9jY2P/Nzc3/0NDQ/9XV1f/b29v/4eHh/7CwsP+fn5//nZ2d/1lZWf82Njb/bW1t/5eXl/+MjIz/6enp/9/f3//X19f/0tLS/8vLy//Pz8//1NTU/9vb2//Z2dn/h4eH/56env9KSkr/Hh4e/1lZWf9gYGD/xsbG/+Xl5f/a2tr/1dXV/9LS0v/Gxsb/yMjI/8vLy//S0tL/2tra/8nJyf+ampr/h4eH/3R0dP96enr/r6+v/+rq6v/h4eH/2NjY/9XV1f/Jycn/w8PD/8XFxf/FxcX/ycnJ/9HR0f/Y2Nj/1NTU/6enp/+QkJD/p6en/9vb2//g4OD/2tra/9bW1v/X19f/nZ2d/8LCwv/CwsL/wMDA/8LCwv/Hx8f/zMzM/8/Pz//Pz8//zc3N/8rKyv/Dw8P/xMTE/8/Pz//R0dH/xsbG/3V1df++vr7/vb29/7u7u/+9vb3/v7+//8DAwP/AwMD/wMDA/8DAwP++vr7/ubm5/7Ozs/+wsLD/u7u7/52dnf+Wlpb/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="/><meta name="dcterms.language" content="en"/><meta name="dcterms.subject" content="programming"/><meta property="og:url" content="http://blog.fabiocicerchia.it/retrieve-js-events-how-to-get-all-of-them"/><meta name="twitter:url" content="http://blog.fabiocicerchia.it/retrieve-js-events-how-to-get-all-of-them"/><link rel="alternate" type="application/rss+xml" title="Fabio Cicerchia" href="http://blog.fabiocicerchia.it/feed.xml"/><link rel="stylesheet" href="/css/201601090709.min.css"/></head><body><header class="site-header"><div class="wrap"><h1><a class="site-title" href="/" title="Homepage">Fabio Cicerchia</a></h1><nav class="site-nav"> <a class="menu-icon"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve"> <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/> <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/> <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/> </svg> </a><div class="trigger"> <a class="page-link page-icon page-about" href="/about/" title="About">About</a> <a class="page-link page-icon page-archive" href="/archive/" title="Archive">Archive</a> <a class="page-link page-icon page-cv" href="http://fabiocicerchia.it" title="CV">CV</a> <a class="page-link page-icon page-rss" href="/feed.xml" title="RSS">RSS</a></div> </nav></div></header><div class="page-content"><div class="wrap"><div class="post"> <article class="post-content"> <header class="post-header"><h2>Retrieve JS Events: how to get all of them</h2><p class="meta"> <i class="fa fa-calendar"></i> Tue, Dec 3, 2013 <i class="fa fa-book"></i> <a href="/programming/" title="Category archive for programming">programming</a> <i class="fa fa-tag"></i> dom, events, javascript, nodejs, phantomjs <i class="fa fa-clock-o"></i> Reading time: 2 min.</p> </header><p>I was trying face an apparently huge problem, collect all the events <strong>bound</strong> to the DOM elements. Then I realised that the main <em>obstacle</em> was the <em>browser</em>, yes the browser.<br/> Because of the way the browser manage the events.</p><p>So I started my research about it, nothing came from Google or StackOverflow.</p><p>This answer made me think and for a second I was about to give up on that:</p><blockquote><p>Event handlers attached using DOM Level 2 Events addEventListener methods and IE’s attachEvent cannot currently be retrieved from script at all. DOM Level 3 once proposed element.eventListenerList to get all listeners, but it is unclear whether this will make it to the final specification. There is no implementation in any browser today.</p><p>–<cite><a href="http://stackoverflow.com/a/2623352/888162">bobince</a></cite></p></blockquote><p>There are few ways to bind an event we should focus on:</p><ul><li><a href="http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.3"><code>on*</code></a> HTML attribute</li><li><a href="https://developer.mozilla.org/en/docs/Web/API/EventTarget.addEventListener"><code>element.addEventListener</code></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ie/ms536343(v=vs.85).aspx"><code>element.attachEvent</code></a></li></ul><p>The last 2 are not possible to be retrieved without some workounds because they are <strong>handled internally</strong> by the browser and they don’t leave any trace in the DOM.</p><p>I’ve developed a <em>plain JS class</em> while I was facing this problem when working on my own project <strong><a href="http://salmonjs.org">salmonJS</a></strong>, a <em>web spider</em> which is using <em>PhantomJS</em> and <em>Node.js</em>. So I came with this solution which seems to be the most appropriate one to run on PhantomJS (and I believe it works fine with <em>CasperJS</em> as well).</p><p>My personal approach was <strong>overriding the default behaviour</strong> at the beginning of the page load, so nothing else can try to bind an event before initialise the “interceptor”.</p><p>There is nothing that needs to be configured to make it working, just include it in your page before EVERYTHING else.</p><p>You can collect at any time the events just calling:</p><div class="highlight"><pre><code class="language-js" data-lang="js"><span class="lineno">1</span> <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="nx">eventContainer</span><span class="p">.</span><span class="nx">getEvents</span><span class="p">();</span></code></pre></div><script src="https://gist.github.com/fabiocicerchia/7116129.js"></script></article> -<div> If you liked this post, you can <a href="https://twitter.com/intent/tweet?url=http://blog.fabiocicerchia.it/retrieve-js-events-how-to-get-all-of-them&amp;text=Retrieve%20JS%20Events:%20how%20to%20get%20all%20of%20them&amp;via=fabiocicerchia" target="_blank">share it with your followers</a> or <a href="https://twitter.com/fabiocicerchia">follow me on Twitter</a>!</div><div id="page-navigation"><div class="clear"> </div><div class="left"> <a href="/browser-fingerprinting-there-s-no-place-where-you-can-hide" title="Previous Post: Browser Fingerprinting: There's no place where you can hide"><i class="fa fa-angle-left"></i> Browser Fingerprinting: There's no place where you can hide</a></div><div class="right"> <a href="/versioning-numbers-make-them-meaningful" title="next Post: Versioning Numbers, make them meaningful">Versioning Numbers, make them meaningful <i class="fa fa-angle-right"></i> </a></div><div class="clear"> </div></div><div class="related"><h4>Related Posts</h4><ul><li><a href="/being-really-agile-being-really-smart" title="Related Post: Being really agile, Being really smart">Being really agile, Being really smart</a></li><li><a href="/branching-model-clean-up-those-repos" title="Related Post: Branching Model: clean-up those repos">Branching Model: clean-up those repos</a></li><li><a href="/versioning-numbers-make-them-meaningful" title="Related Post: Versioning Numbers, make them meaningful">Versioning Numbers, make them meaningful</a></li><li><a href="/browser-fingerprinting-there-s-no-place-where-you-can-hide" title="Related Post: Browser Fingerprinting: There's no place where you can hide">Browser Fingerprinting: There's no place where you can hide</a></li></ul></div><div id="comments"><h3>Comments</h3><div id="disqus_thread"></div> <script>var disqus_shortname="fabiocicerchia";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div></div></div></div><footer class="site-footer"><div class="wrap"><div class="pull-left"> <img id="profile-pic" alt="Profile Picture" src="/img/face.png" height="100" width="100"/></div><div class="pull-right"><p class="copyright"> © 2016 Fabio Cicerchia. Licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p><p class="text">Italian 29yo Passionate Developer, currently based in London, with 10+ years of experience in web applications and web portals.<br/>Focused on software performance and maintainability.<br/>What else? Coffee (espresso, please) drinker, sandwich eater, sushi addicted, pasta lover.</p><ul class="inline"><li> <a href="mailto:info@fabiocicerchia.it"> <i class="fa fa-envelope"></i> <span>info@fabiocicerchia.it</span> </a></li><li> <a href="https://github.com/fabiocicerchia"> <i class="fa fa-github"></i> <span class="username">fabiocicerchia</span> </a></li><li> <a href="https://twitter.com/fabiocicerchia"> <i class="fa fa-twitter"></i> <span class="username">fabiocicerchia</span> </a></li><li> <a href="skype:fabio.cicerchia?call"> <i class="fa fa-skype"></i> <span class="username">fabio.cicerchia</span> </a></li><li> <a href="http://linkedin.com/in/fabio.cicerchia"> <i class="fa fa-linkedin"></i> <span class="username">fabio.cicerchia</span> </a></li></ul></div></div> </footer><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-439670-15","auto"),ga("send","pageview")</script></body></html>